<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#4F46E5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ì‹œí¸119">
    <meta name="description" content="ì‹œí¸ 119í¸ íˆë¸Œë¦¬ì–´ ë‹¨ì–´ë³„ í•™ìŠµ ì•±">
    <title>ì‹œí¸ 119í¸ íˆë¸Œë¦¬ì–´ í•™ìŠµ</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='75' font-size='80'%3EğŸ“–%3C/text%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            overscroll-behavior: none;
            -webkit-overflow-scrolling: touch;
        }
        * {
            -webkit-tap-highlight-color: transparent;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        const PSALM_119_DATA = [
          {
            hebrewLetter: "× (Aleph)",
            startVerse: 1,
            endVerse: 8,
            verses: [
              {
                verse: 1,
                hebrew: "×Ö·×©Ö°××¨Öµ×™ ×ªÖ°×Ö´×™×Öµ×™Ö¾×“Ö¸×¨Ö¶×šÖ° ×”Ö·×”Ö¹×œÖ°×›Ö´×™× ×‘Ö°Ö¼×ª×•Ö¹×¨Ö·×ª ×™Ö°×”×•Ö¸×”×ƒ",
                translation: "í–‰ìœ„ê°€ ì˜¨ì „í•˜ì—¬ ì—¬í˜¸ì™€ì˜ ìœ¨ë²•ì„ ë”°ë¼ í–‰í•˜ëŠ” ìë“¤ì€ ë³µì´ ìˆìŒì´ì—¬.",
                words: [
                  { h: "×Ö·×©Ö°××¨Öµ×™", t: "Ashrei", m: "ë³µì´ ìˆëŠ”", r: "Interjection" },
                  { h: "×ªÖ°×Ö´×™×Öµ×™Ö¾×“Ö¸×¨Ö¶×šÖ°", t: "temimei-darekh", m: "ê¸¸ì´ ì˜¨ì „í•œ ìë“¤", r: "Noun phrase" },
                  { h: "×”Ö·×”Ö¹×œÖ°×›Ö´×™×", t: "hahol'khim", m: "ê±·ëŠ” ìë“¤", r: "Verb (Piel Participle)" },
                  { h: "×‘Ö°Ö¼×ª×•Ö¹×¨Ö·×ª", t: "b'torat", m: "ìœ¨ë²• ì•ˆì—", r: "Noun (Torah)" },
                  { h: "×™Ö°×”×•Ö¸×”", t: "YHWH", m: "ì—¬í˜¸ì™€", r: "Proper Noun" }
                ]
              },
              {
                verse: 2,
                hebrew: "×Ö·×©Ö°××¨Öµ×™ ×©Ö¹××Ö°×¨Öµ×™ ×¢Öµ×“Ö¹×ªÖ¸×™×• ×‘Ö°Ö¼×›Ö¸×œÖ¾×œÖµ×‘ ×™Ö´×“Ö°×¨Ö°×©××•Ö¼×”×•Ö¼×ƒ",
                translation: "ì—¬í˜¸ì™€ì˜ ì¦ê±°ë“¤ì„ ì§€í‚¤ê³  ì „ì‹¬ìœ¼ë¡œ ì—¬í˜¸ì™€ë¥¼ êµ¬í•˜ëŠ” ìë“¤ì€ ë³µì´ ìˆë„ë‹¤.",
                words: [
                  { h: "×Ö·×©Ö°××¨Öµ×™", t: "Ashrei", m: "ë³µì´ ìˆëŠ”", r: "Interjection" },
                  { h: "×©Ö¹××Ö°×¨Öµ×™", t: "shom'rei", m: "ì§€í‚¤ëŠ” ìë“¤", r: "Verb (Qal Participle)" },
                  { h: "×¢Öµ×“Ö¹×ªÖ¸×™×•", t: "edotav", m: "ê·¸ì˜ ì¦ê±°ë“¤", r: "Noun" },
                  { h: "×‘Ö°Ö¼×›Ö¸×œÖ¾×œÖµ×‘", t: "b'khol-lev", m: "ì˜¨ ë§ˆìŒìœ¼ë¡œ", r: "Prepositional Phrase" },
                  { h: "×™Ö´×“Ö°×¨Ö°×©××•Ö¼×”×•Ö¼", t: "yidr'shuhu", m: "ê·¸ë¥¼ êµ¬í•˜ëŠ”", r: "Verb (Qal Imperfect)" }
                ]
              },
              {
                verse: 3,
                hebrew: "×Ö·×£ ×œÖ¹×Ö¾×¤Ö¸×¢Ö²×œ×•Ö¼ ×¢Ö·×•Ö°×œÖ¸×” ×‘Ö´Ö¼×“Ö°×¨Ö¸×›Ö¸×™×• ×”Ö¸×œÖ¸×›×•Ö¼×ƒ",
                translation: "ë˜ ì €í¬ëŠ” ë¶ˆì˜ë¥¼ í–‰ì¹˜ ì•„ë‹ˆí•˜ê³  ê·¸ì˜ ë„ë¥¼ í–‰í•˜ëŠ”ë„ë‹¤.",
                words: [
                  { h: "×Ö·×£", t: "Af", m: "ë˜í•œ", r: "Adverb" },
                  { h: "×œÖ¹×Ö¾×¤Ö¸×¢Ö²×œ×•Ö¼", t: "lo-fa'alu", m: "í–‰í•˜ì§€ ì•Šì•˜ë‹¤", r: "Verb (Qal Perfect)" },
                  { h: "×¢Ö·×•Ö°×œÖ¸×”", t: "avlah", m: "ë¶ˆì˜", r: "Noun" },
                  { h: "×‘Ö´Ö¼×“Ö°×¨Ö¸×›Ö¸×™×•", t: "bidrakhav", m: "ê·¸ì˜ ê¸¸ì—ì„œ", r: "Prepositional Phrase" },
                  { h: "×”Ö¸×œÖ¸×›×•Ö¼", t: "halakhu", m: "ê·¸ë“¤ì´ ê±¸ì—ˆë‹¤", r: "Verb (Qal Perfect)" }
                ]
              }
            ]
          }
        ];

        const findVerseByNumber = (verseNum) => {
          for (const stanza of PSALM_119_DATA) {
            for (const verse of stanza.verses) {
              if (verse.verse === verseNum) return verse;
            }
          }
          return PSALM_119_DATA[0].verses[0];
        };

        const WordDetailModal = ({ selectedWord, onClose }) => {
          if (!selectedWord) return null;

          return (
            <div 
              className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50"
              onClick={onClose}
            >
              <div 
                className="bg-white rounded-xl shadow-2xl w-full max-w-sm p-6"
                onClick={e => e.stopPropagation()}
              >
                <div className="flex justify-between items-start border-b pb-3 mb-4">
                  <h3 className="text-3xl font-bold text-gray-800" dir="rtl">{selectedWord.h}</h3>
                  <button onClick={onClose} className="p-2 text-gray-500 hover:bg-gray-100 rounded-full text-2xl leading-none">
                    Ã—
                  </button>
                </div>

                <div className="space-y-3">
                  <div className="p-3 bg-gray-50 rounded-lg">
                    <p className="text-xs font-semibold text-gray-600 mb-1">ìŒì—­</p>
                    <p className="text-lg font-mono text-indigo-700">{selectedWord.t}</p>
                  </div>
                  
                  <div className="p-3 bg-gray-50 rounded-lg">
                    <p className="text-xs font-semibold text-gray-600 mb-1">ì˜ë¯¸</p>
                    <p className="text-lg text-gray-800">{selectedWord.m}</p>
                  </div>

                  <div className="p-3 bg-gray-50 rounded-lg">
                    <p className="text-xs font-semibold text-gray-600 mb-1">í’ˆì‚¬</p>
                    <p className="text-base text-gray-700">{selectedWord.r}</p>
                  </div>
                </div>

                <button 
                  onClick={onClose} 
                  className="mt-6 w-full py-3 bg-indigo-600 text-white font-semibold rounded-lg active:bg-indigo-700"
                >
                  ë‹«ê¸°
                </button>
              </div>
            </div>
          );
        };

        const App = () => {
          const [currentVerseNum, setCurrentVerseNum] = useState(1);
          const [selectedWord, setSelectedWord] = useState(null);

          const lastAvailableVerse = useMemo(() => 
            Math.max(...PSALM_119_DATA.flatMap(stanza => stanza.verses.map(v => v.verse)))
          , []);

          const currentVerse = useMemo(() => findVerseByNumber(currentVerseNum), [currentVerseNum]);
          
          const currentStanza = useMemo(() => 
            PSALM_119_DATA.find(s => s.startVerse <= currentVerseNum && s.endVerse >= currentVerseNum) || PSALM_119_DATA[0]
          , [currentVerseNum]);

          const navigateVerse = (direction) => {
            const nextVerseNum = currentVerseNum + direction;
            if (nextVerseNum >= 1 && nextVerseNum <= lastAvailableVerse) {
              setCurrentVerseNum(nextVerseNum);
            }
          };

          const hebrewWords = useMemo(() => {
            return currentVerse.words.map((wordData, index) => (
              <span
                key={index}
                className="inline-block mx-1 py-2 px-3 rounded-lg cursor-pointer transition-all active:bg-yellow-200 hover:bg-yellow-100 text-gray-900"
                onClick={() => setSelectedWord(wordData)}
              >
                {wordData.h}
              </span>
            ));
          }, [currentVerse]);

          return (
            <div className="min-h-screen bg-gray-50 flex flex-col">
              <header className="bg-indigo-600 text-white shadow-lg p-4 sticky top-0 z-10">
                <div className="flex justify-between items-center max-w-2xl mx-auto">
                  <h1 className="text-lg font-bold">ğŸ“– ì‹œí¸ 119í¸</h1>
                  <button 
                    className="p-2 bg-indigo-700 rounded-full active:bg-indigo-800"
                    onClick={() => setCurrentVerseNum(1)}
                  >
                    ğŸ 
                  </button>
                </div>
              </header>

              <main className="flex-grow p-4 max-w-2xl mx-auto w-full pb-20">
                <div className="bg-white rounded-xl shadow-xl p-5 mb-6 border-t-4 border-indigo-500">
                  <p className="text-sm font-semibold text-indigo-500 mb-2">
                    {currentStanza.hebrewLetter} | <span className="text-2xl">{currentVerseNum}</span>ì ˆ
                  </p>

                  <h2 
                    className="text-4xl text-right my-4 leading-relaxed text-gray-900" 
                    dir="rtl"
                  >
                    {hebrewWords}
                  </h2>

                  <div className="mt-5 pt-4 border-t">
                    <p className="text-xs font-semibold text-gray-500">ë²ˆì—­</p>
                    <p className="text-base text-gray-700 leading-relaxed mt-1">
                      {currentVerse.translation}
                    </p>
                  </div>
                </div>

                <div className="flex gap-3">
                  <button 
                    onClick={() => navigateVerse(-1)} 
                    disabled={currentVerseNum <= 1}
                    className="flex-1 py-4 bg-gray-200 text-gray-700 font-bold rounded-lg active:bg-gray-300 disabled:opacity-50 text-lg"
                  >
                    â† ì´ì „
                  </button>
                  
                  <button 
                    onClick={() => navigateVerse(1)} 
                    disabled={currentVerseNum >= lastAvailableVerse}
                    className="flex-1 py-4 bg-indigo-500 text-white font-bold rounded-lg active:bg-indigo-600 disabled:opacity-50 text-lg"
                  >
                    ë‹¤ìŒ â†’
                  </button>
                </div>

                <p className="text-center text-xs text-gray-400 mt-4">
                  ë‹¨ì–´ë¥¼ íƒ­í•˜ë©´ ìƒì„¸ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤
                </p>
              </main>

              <WordDetailModal 
                selectedWord={selectedWord} 
                onClose={() => setSelectedWord(null)} 
              />
            </div>
          );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>

    <script>
        // Service Worker ë“±ë¡
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker ë“±ë¡ ì„±ê³µ'))
                    .catch(err => console.log('Service Worker ë“±ë¡ ì‹¤íŒ¨:', err));
            });
        }
    </script>
</body>
</html>